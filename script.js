/* === دیتابیس جامع و عظیم گیاهان (نسخه نهایی و کامل) === */
const plantData = {
    // ==========================================
    // گروه ۱: مقاوم و تصفیه‌کننده (جان‌سخت‌ها)
    // ==========================================
    "سانسوریا (شمشیری)": {
      آبیاری: "بسیار کم. تنها زمانی که خاک کاملاً خشک شده باشد (هر ۱۰-۲۰ روز).",
      نور: "همه نوع نور (از سایه کامل تا آفتاب مستقیم).",
      کوددهی: "کود ۱۰-۱۰-۱۰ در بهار و تابستان (ماهی یکبار).",
      قلمه: "قلمه برگ در خاک یا آب، تقسیم ریزوم.",
      آفات: "پوسیدگی ریشه (کشنده)، شپشک آردآلود.",
      گروه: "مقاوم و تصفیه‌کننده",
      عیب_یابی: [
        { مشکل: "لش شدن و نرمی برگ‌ها", علت: "آبیاری بیش از حد و باتلاقی شدن خاک (خطر مرگ).", راه_حل: "آبیاری را قطع کنید، قسمت‌های سالم را قلمه بگیرید." },
        { مشکل: "باریک شدن برگ‌های جدید", علت: "نور بسیار کم.", راه_حل: "به مکان پرنورتری منتقل کنید." },
        { مشکل: "چروک شدن برگ‌ها", علت: "تشنگی شدید.", راه_حل: "گیاه را سیراب کنید." }
      ],
      دانشنامه: {
        خاستگاه: "غرب آفریقا.",
        دما: "۱۵ تا ۲۸ درجه. به سرما حساس است.",
        خاک_ایده‌آل: "خاک سنگین و ماسه‌ای با زهکشی عالی (خاک کاکتوس).",
        نام_علمی: "Sansevieria trifasciata"
      }
    },
    "زاموفیلیا (زامیفولیا)": {
      آبیاری: "بسیار کم. ریزوم‌ها آب ذخیره می‌کنند (خشکی کامل خاک + ۵ روز صبر).",
      نور: "متوسط تا کم. نور فیلتر شده بهترین حالت است.",
      کوددهی: "کود فسفر بالا (خیلی کم) در فصل رشد.",
      قلمه: "برگ و ساقه (ریشه‌دهی زمان‌بر است: ۲ تا ۶ ماه).",
      آفات: "تقریباً بدون آفت. حساس به قارچ ریشه.",
      گروه: "مقاوم و تصفیه‌کننده",
      عیب_یابی: [
        { مشکل: "زرد شدن برگ‌های پایین", علت: "آبیاری زیاد (رایج‌ترین علت).", راه_حل: "چک کردن ریشه و کاهش آبیاری." },
        { مشکل: "سیاه شدن ساقه در نزدیکی خاک", علت: "پوسیدگی ریزوم.", راه_حل: "تعویض خاک فوری و حذف بخش پوسیده." }
      ],
      دانشنامه: {
        خاستگاه: "شرق آفریقا (کنیا).",
        دما: "۱۸ تا ۲۶ درجه.",
        خاک_ایده‌آل: "خاک سبک با پرلیت فراوان و زهکشی سریع.",
        نام_علمی: "Zamioculcas zamiifolia"
      }
    },
    "پتوس (عشقه)": {
      آبیاری: "متوسط. زمانی که ۳-۴ سانت روی خاک خشک شد.",
      نور: "متوسط غیرمستقیم. گونه‌های ابلق نور بیشتری می‌خواهند.",
      کوددهی: "کود کامل ۲۰-۲۰-۲۰ هر ماه.",
      قلمه: "ساقه در آب (بسیار آسان).",
      آفات: "شپشک آردآلود، کنه.",
      گروه: "مقاوم و تصفیه‌کننده",
      عیب_یابی: [
        { مشکل: "زرد شدن برگ‌ها به صورت تکی", علت: "آبیاری بیش از حد یا پیر شدن طبیعی برگ.", راه_حل: "تست خشکی خاک را انجام دهید." },
        { مشکل: "فاصله زیاد بین برگ‌ها", علت: "نور کم (رشد علفی).", راه_حل: "نزدیک پنجره ببرید یا هرس کنید." }
      ],
      دانشنامه: {
        خاستگاه: "جزایر سلیمان.",
        دما: "۱۸ تا ۲۴ درجه. بسیار سازگار.",
        خاک_ایده‌آل: "خاک معمولی گلدان.",
        نام_علمی: "Epipremnum aureum"
      }
    },
    "آگلونما (نخودی)": {
      آبیاری: "زمانی که خاک رو به خشکی رفت. رطوبت دوست است.",
      نور: "سایه دوست (گونه‌های سبز) تا نور متوسط (گونه‌های رنگی/برفی).",
      کوددهی: "کود سه بیست هر دو هفته در بهار.",
      قلمه: "تقسیم بوته و پاجوش.",
      آفات: "شپشک آردآلود (لای غلاف برگ‌ها).",
      گروه: "مقاوم و تصفیه‌کننده",
      عیب_یابی: [
        { مشکل: "لوله شدن برگ‌ها", علت: "خشکی هوا یا تشنگی.", راه_حل: "غبارپاشی کنید یا آبیاری کنید." },
        { مشکل: "زردی نوک برگ", علت: "آبیاری زیاد.", راه_حل: "اجازه دهید خاک خشک شود." }
      ],
      دانشنامه: {
        خاستگاه: "آسیای جنوب شرقی.",
        دما: "۱۸ تا ۲۵ درجه. از سرما بیزار است.",
        خاک_ایده‌آل: "خاک برگ پوسیده با زهکشی بالا.",
        نام_علمی: "Aglaonema"
      }
    },

    // ==========================================
    // گروه ۲: کاکتوس‌ها و ساکولنت‌ها
    // ==========================================
    "کاکتوس (انواع تیغ‌دار)": {
        آبیاری: "بسیار اندک. در زمستان تقریباً قطع شود.",
        نور: "آفتاب کامل و مستقیم (حداقل ۴ ساعت).",
        کوددهی: "کود مخصوص کاکتوس (پتاس بالا) در تابستان.",
        قلمه: "پاجوش یا بذر.",
        آفات: "شپشک آردآلود.",
        گروه: "کاکتوس و ساکولنت",
        عیب_یابی: [
            { مشکل: "باریک و دراز شدن کاکتوس", علت: "نور کم (رشد علفی).", راه_حل: "به آفتاب مستقیم منتقل کنید." },
            { مشکل: "شُل شدن و پوسیدگی پایه", علت: "آبیاری زیاد.", راه_حل: "متاسفانه درمان سخت است؛ قسمت سالم را قلمه بگیرید." }
        ],
        دانشنامه: {
            خاستگاه: "قاره آمریکا.",
            دما: "مقاوم به گرما، حساس به یخ‌زدگی.",
            خاک_ایده‌آل: "خاک کاکتوس (۷۰٪ شن شسته شده).",
            نام_علمی: "Cactaceae"
        }
    },
    "کراسولا (یشم/خرفه)": {
        آبیاری: "بسیار کم (مثل کاکتوس). آبیاری زیاد باعث مرگ فوری می‌شود.",
        نور: "زیاد و حتی آفتاب مستقیم (پنجره جنوبی).",
        کوددهی: "کود مخصوص کاکتوس.",
        قلمه: "ساقه یا برگ در خاک.",
        آفات: "شپشک آردآلود.",
        گروه: "کاکتوس و ساکولنت",
        عیب_یابی: [
            { مشکل: "ریزش برگ‌های سبز", علت: "آبیاری زیاد یا شوک سرما.", راه_حل: "آبیاری را متوقف کنید." },
            { مشکل: "چروک شدن برگ‌ها", علت: "تشنگی.", راه_حل: "گیاه را سیراب کنید." }
        ],
        دانشنامه: {
            خاستگاه: "آفریقای جنوبی.",
            دما: "۱۰ تا ۲۴ درجه. هوای خشک را دوست دارد.",
            خاک_ایده‌آل: "خاک کاکتوس و ساکولنت.",
            نام_علمی: "Crassula ovata"
        }
    },
    "آلوئه‌ورا": {
        آبیاری: "خاک باید کاملاً خشک شود.",
        نور: "نور زیاد و مستقیم.",
        کوددهی: "سالی یکبار.",
        قلمه: "پاجوش‌های کناری.",
        آفات: "شپشک.",
        گروه: "کاکتوس و ساکولنت",
        عیب_یابی: [
            { مشکل: "قهوه‌ای و شل شدن برگ‌ها", علت: "آبیاری زیاد (پوسیدگی).", راه_حل: "خاک را عوض کنید." },
            { مشکل: "نازک شدن برگ‌ها", علت: "نور کم یا تشنگی.", راه_حل: "نور را افزایش دهید." }
        ],
        دانشنامه: {
            خاستگاه: "شبه‌جزیره عربستان.",
            دما: "۱۳ تا ۲۷ درجه.",
            خاک_ایده‌آل: "خاک شنی کاکتوس.",
            نام_علمی: "Aloe vera"
        }
    },
    "افوربیا (تیروکالی/تریگونا)": {
        آبیاری: "بسیار کم. مانند کاکتوس. بین دو آبیاری خاک خشک خشک باشد.",
        نور: "نور زیاد و مستقیم آفتاب.",
        کوددهی: "سالی دو بار.",
        قلمه: "ساقه (شیره سمی است).",
        آفات: "قارچ و شپشک.",
        گروه: "کاکتوس و ساکولنت",
        عیب_یابی: [
            { مشکل: "زرد شدن و ریزش برگ‌های کوچک", علت: "سرما یا آبیاری زیاد.", راه_حل: "جای گرم‌تر ببرید." },
            { مشکل: "لکه‌های قهوه‌ای روی ساقه", علت: "قارچ زدگی (رطوبت بالا).", راه_حل: "تهویه را زیاد کنید." }
        ],
        دانشنامه: {
            خاستگاه: "آفریقا.",
            دما: "گرما دوست.",
            خاک_ایده‌آل: "خاک کاکتوس.",
            نام_علمی: "Euphorbia"
        }
    },
    "کالانکوئه": {
        آبیاری: "زمانی که خاک کاملاً خشک شد. برگ‌ها گوشتی هستند.",
        نور: "نور زیاد پشت پنجره.",
        کوددهی: "کود گلدهی در پاییز.",
        قلمه: "ساقه و برگ.",
        آفات: "شته و شپشک.",
        گروه: "کاکتوس و ساکولنت",
        عیب_یابی: [
            { مشکل: "گل ندادن مجدد", علت: "نور زیاد در شب (نیاز به روز کوتاه دارد).", راه_حل: "عصرها در تاریکی مطلق باشد." },
            { مشکل: "دراز شدن ساقه", علت: "نور کم.", راه_حل: "نور را بیشتر کنید." }
        ],
        دانشنامه: {
            خاستگاه: "ماداگاسکار.",
            دما: "۱۰ تا ۲۵ درجه.",
            خاک_ایده‌آل: "خاک سبک و ماسه‌ای.",
            نام_علمی: "Kalanchoe blossfeldiana"
        }
    },

    // ==========================================
    // گروه ۳: درختچه‌ها و نخل‌های آپارتمانی
    // ==========================================
    "یوکا": {
        آبیاری: "بگذارید خاک کاملاً خشک شود (حداقل یک سوم ارتفاع خاک). بسیار حساس به آبیاری زیاد.",
        نور: "نور زیاد و مستقیم (پنجره جنوبی یا تراس). در سایه برگ‌ها آویزان می‌شوند.",
        کوددهی: "ماهی یکبار در بهار و تابستان.",
        قلمه: "قلمه تنه (کنده‌ها) یا جدا کردن پاجوش.",
        آفات: "شپشک آردآلود (نقاط سفید پنبه‌ای).",
        گروه: "درختچه‌ها و نخل‌ها",
        عیب_یابی: [
            { مشکل: "زرد شدن و ریزش برگ‌های پایین", علت: "اگر تدریجی باشد طبیعی است، اگر ناگهانی باشد آبیاری زیاد یا نور کم است.", راه_حل: "آبیاری را کاهش دهید." },
            { مشکل: "لش شدن و نرم شدن تنه", علت: "پوسیدگی ریشه در اثر آبیاری زیاد.", راه_حل: "قسمت سالم را قلمه بگیرید (گیاه اصلی از دست رفته است)." },
            { مشکل: "لکه‌های قهوه‌ای روی برگ", علت: "قارچ (رطوبت بالا) یا آفتاب سوختگی ناگهانی.", راه_حل: "تهویه را بهتر کنید." }
        ],
        دانشنامه: {
            خاستگاه: "کارائیب و مکزیک.",
            دما: "۱۳ تا ۲۷ درجه. مقاوم به گرما و سرما.",
            خاک_ایده‌آل: "خاک لومی سنگین با زهکشی خوب (خاک کاکتوس).",
            نام_علمی: "Yucca elephantipes"
        }
    },
    "دیفن‌باخیا": {
        آبیاری: "خاک مرطوب بماند (اما خیس نشود). خشک شدن ۲ سانت روی خاک.",
        نور: "نور فیلتر شده متوسط تا زیاد.",
        کوددهی: "کود کامل گیاهان آپارتمانی.",
        قلمه: "قلمه ساقه (تکه‌های ۵ سانتی).",
        آفات: "شپشک آردآلود.",
        گروه: "درختچه‌ها و نخل‌ها",
        عیب_یابی: [
            { مشکل: "لگه‌های قهوه‌ای روی برگ", علت: "قارچ (تهویه بد) یا آب روی برگ.", راه_حل: "تهویه را بهتر کنید." },
            { مشکل: "زرد شدن برگ‌های پایین", علت: "آبیاری زیاد یا پیری.", راه_حل: "اجازه دهید سطح خاک خشک شود." },
            { مشکل: "رنگ‌پریدگی برگ", علت: "نور خیلی زیاد.", راه_حل: "نور را فیلتر کنید." }
        ],
        دانشنامه: {
            خاستگاه: "آمریکای مرکزی.",
            دما: "۱۸ تا ۲۴ درجه. شیره گیاه سمی است.",
            خاک_ایده‌آل: "خاک برگ و پرلیت.",
            نام_علمی: "Dieffenbachia"
        }
    },
    "کروتون (کرچک هندی)": {
        آبیاری: "خاک نباید کامل خشک شود. سطح خاک خشک شد آب دهید.",
        نور: "نور زیاد و روشن (برای حفظ رنگ‌ها ضروری است).",
        کوددهی: "کود کامل هر دو هفته.",
        قلمه: "ساقه در آب.",
        آفات: "کنه تارعنکبوتی (بسیار مستعد).",
        گروه: "درختچه‌ها و نخل‌ها",
        عیب_یابی: [
            { مشکل: "ریزش ناگهانی برگ‌ها", علت: "شوک دمایی (جابجایی) یا تشنگی.", راه_حل: "مکان ثابت و گرم باشد." },
            { مشکل: "سبز شدن برگ‌های رنگی", علت: "نور کم.", راه_حل: "به پرنورترین پنجره منتقل کنید." }
        ],
        دانشنامه: {
            خاستگاه: "مالزی و اندونزی.",
            دما: "گرم و مرطوب (زیر ۱۵ درجه برگ می‌ریزد).",
            خاک_ایده‌آل: "خاک غنی و مرطوب.",
            نام_علمی: "Codiaeum variegatum"
        }
    },
    "شفلرا (چتری)": {
        آبیاری: "وقتی خاک خشک شد. هفته‌ای یکبار غبارپاشی.",
        نور: "نور غیرمستقیم متوسط تا زیاد.",
        کوددهی: "کود کامل گیاهان زینتی.",
        قلمه: "قلمه ساقه در آب یا خاک.",
        آفات: "کنه و شپشک.",
        گروه: "درختچه‌ها و نخل‌ها",
        عیب_یابی: [
          { مشکل: "ریزش برگ‌های سبز و سالم", علت: "آبیاری زیاد یا سرمای محیط.", راه_حل: "دما را چک کنید." },
          { مشکل: "رنگ پریدگی برگ‌های ابلق", علت: "نور کم.", راه_حل: "نور را افزایش دهید." }
        ],
        دانشنامه: {
          خاستگاه: "تایوان.",
          دما: "۱۸ تا ۲۷ درجه.",
          خاک_ایده‌آل: "کوکوپیت + پرلیت + خاک برگ.",
          نام_علمی: "Schefflera arboricola"
        }
    },
    "دراسینا کامپکت": {
        آبیاری: "زمانی که خاک تا نیمه خشک شد. به آبیاری زیاد حساس است.",
        نور: "نور کم تا متوسط (مقاوم به سایه).",
        کوددهی: "خیلی کم (حساس به نمک).",
        قلمه: "ساقه.",
        آفات: "کنه و شپشک.",
        گروه: "درختچه‌ها و نخل‌ها",
        عیب_یابی: [
            { مشکل: "قهوه‌ای شدن نوک برگ‌ها", علت: "املاح و کلر آب یا کود زیاد.", راه_حل: "از آب جوشیده استفاده کنید." },
            { مشکل: "زرد شدن برگ از پایین", علت: "طبیعی (رشد) یا آبیاری زیاد.", راه_حل: "اگر زیاد است آبیاری را کم کنید." }
        ],
        دانشنامه: {
            خاستگاه: "آفریقا.",
            دما: "۱۵ تا ۲۵ درجه.",
            خاک_ایده‌آل: "خاک سبک لومی.",
            نام_علمی: "Dracaena compacta"
        }
    },
    "فیکوس آمبلتا": {
        آبیاری: "خاک همیشه مرطوب باشد اما غرقاب نشود.",
        نور: "نور زیاد و روشن غیرمستقیم.",
        کوددهی: "کود نیتروژن بالا.",
        قلمه: "قلمه ساقه.",
        آفات: "کنه.",
        گروه: "درختچه‌ها و نخل‌ها",
        عیب_یابی: [
            { مشکل: "برگ‌های بزرگ و نازک پژمرده می‌شوند", علت: "تشنگی.", راه_حل: "سریعاً آبیاری کنید." },
            { مشکل: "لکه‌های سیاه روی برگ", علت: "سرما یا قارچ.", راه_حل: "جای گرم نگه دارید." }
        ],
        دانشنامه: {
            خاستگاه: "آفریقا.",
            دما: "گرمسیری.",
            خاک_ایده‌آل: "خاک غنی و سبک.",
            نام_علمی: "Ficus umbellata"
        }
    },
    "کاج مطبق": {
        آبیاری: "خاک همیشه مرطوب باشد (خشکی را دوست ندارد).",
        نور: "نور زیاد غیرمستقیم. سایه باعث خم شدن شاخه می‌شود.",
        کوددهی: "کود مخصوص گیاهان اسیدی.",
        قلمه: "بسیار دشوار (فقط بذر).",
        آفات: "شپشک آردآلود.",
        گروه: "درختچه‌ها و نخل‌ها",
        عیب_یابی: [
          { مشکل: "افتادگی شاخه‌ها (شل شدن)", علت: "گرمای زیاد هوا یا تشنگی.", راه_حل: "به جای خنک ببرید و سیراب کنید." },
          { مشکل: "قهوه‌ای شدن و ریزش برگ‌ها", علت: "خشکی هوا.", راه_حل: "حتماً روزانه غبارپاشی کنید یا بخور سرد بگذارید." }
        ],
        دانشنامه: {
          خاستگاه: "جزیره نورفولک (استرالیا).",
          دما: "۵ تا ۲۵ درجه. هوای خنک و اکسیژن زیاد می‌خواهد.",
          خاک_ایده‌آل: "خاک سبک و اسیدی (کمپوست).",
          نام_علمی: "Araucaria heterophylla"
        }
    },
    "پاچیرا (درخت پول)": {
        آبیاری: "هفته‌ای یکبار. خاک باید خشک شود. به پوسیدگی حساس است.",
        نور: "متوسط تا زیاد غیرمستقیم.",
        کوددهی: "ماهی یکبار در بهار.",
        قلمه: "ساقه.",
        آفات: "کنه و پشه قارچ‌خوار.",
        گروه: "درختچه‌ها و نخل‌ها",
        عیب_یابی: [
            { مشکل: "زرد شدن و ریزش برگ", علت: "جابجایی مکان (بسیار حساس به تغییر جا).", راه_حل: "جای گلدان را عوض نکنید." },
            { مشکل: "نرم شدن ساقه بافته شده", علت: "آبیاری زیاد و گیر کردن آب بین بافت‌ها.", راه_حل: "آب روی تنه نریزید." }
        ],
        دانشنامه: {
            خاستگاه: "آمریکای مرکزی.",
            دما: "۱۶ تا ۲۵ درجه.",
            خاک_ایده‌آل: "خاک سبک و شنی.",
            نام_علمی: "Pachira aquatica"
        }
    },
    "بونسای (فیکوس جینسینگ)": {
        آبیاری: "زمانی که سطح خاک خشک شد. نباید خشک بماند.",
        نور: "نور زیاد فیلتر شده.",
        کوددهی: "کود مخصوص بونسای (نصف غلظت).",
        قلمه: "قلمه ساقه.",
        آفات: "شپشک و کنه.",
        گروه: "درختچه‌ها و نخل‌ها",
        عیب_یابی: [
            { مشکل: "ریزش شدید برگ", علت: "تغییر ناگهانی دما یا جابجایی.", راه_حل: "محیط را ثابت نگه دارید." },
            { مشکل: "زرد شدن برگ‌ها", علت: "آبیاری بیش از حد.", راه_حل: "زهکشی را بررسی کنید." }
        ],
        دانشنامه: {
            خاستگاه: "شرق آسیا.",
            دما: "۱۸ تا ۲۴ درجه. رطوبت محیطی بالا می‌خواهد.",
            خاک_ایده‌آل: "خاک مخصوص بونسای (اکاداما) یا کوکوپیت.",
            نام_علمی: "Ficus microcarpa"
        }
    },
    "نخل کنتیا": {
        آبیاری: "زمانی که سطح خاک خشک شد.",
        نور: "مقاوم به نور کم (گران‌ترین و مقاوم‌ترین نخل).",
        کوددهی: "کود نخل.",
        قلمه: "بذر.",
        آفات: "کنه.",
        گروه: "درختچه‌ها و نخل‌ها",
        عیب_یابی: [
            { مشکل: "قهوه‌ای شدن نوک برگ", علت: "خشکی هوا.", راه_حل: "غبارپاشی کنید." },
            { مشکل: "باز نشدن برگ جدید", علت: "کمبود نور یا مواد غذایی.", راه_حل: "به جای پرنورتر ببرید." }
        ],
        دانشنامه: {
            خاستگاه: "جزیره لرد هاوو.",
            دما: "۱۵ تا ۲۵ درجه.",
            خاک_ایده‌آل: "شنی و سبک.",
            نام_علمی: "Howea forsteriana"
        }
    },
    "نخل سیکاس": {
        آبیاری: "وقتی خاک کاملاً خشک شد (پیاز دارد).",
        نور: "نور زیاد و حتی مستقیم.",
        کوددهی: "بسیار کم.",
        قلمه: "پاجوش پیاز.",
        آفات: "شپشک آردآلود.",
        گروه: "درختچه‌ها و نخل‌ها",
        عیب_یابی: [
            { مشکل: "زرد شدن برگ‌ها", علت: "آبیاری زیاد (رایج) یا کود زیاد.", راه_حل: "آبیاری را کم کنید." },
            { مشکل: "برگ‌های دراز و بدفرم", علت: "نور کم.", راه_حل: "نور را بیشتر کنید." }
        ],
        دانشنامه: {
            خاستگاه: "ژاپن.",
            دما: "مقاوم به تغییرات دما.",
            خاک_ایده‌آل: "خاک کاکتوس.",
            نام_علمی: "Cycas revoluta"
        }
    },
    "فیکوس لیراتا (برگ ویلونی)": {
        آبیاری: "زمانی که ۳-۴ سانت خاک کاملاً خشک شد.",
        نور: "نور زیاد و غیرمستقیم.",
        کوددهی: "کود کامل هر دو هفته.",
        قلمه: "قلمه ساقه چوبی.",
        آفات: "کنه و لکه‌های قارچی.",
        گروه: "درختچه‌ها و نخل‌ها",
        عیب_یابی: [
          { مشکل: "لکه‌های قهوه‌ای بزرگ روی برگ", علت: "پوسیدگی ریشه (آبیاری زیاد).", راه_حل: "آبیاری را کاهش دهید." },
          { مشکل: "ریزش برگ سبز", علت: "جابجایی مکان.", راه_حل: "مکان را ثابت نگه دارید." }
        ],
        دانشنامه: {
          خاستگاه: "غرب آفریقا.",
          دما: "۱۸ تا ۲۵ درجه.",
          خاک_ایده‌آل: "خاک لومی با زهکشی بسیار خوب.",
          نام_علمی: "Ficus lyrata"
        }
    },
    "بنجامین (فیکوس)": {
        آبیاری: "وقتی یک بند انگشت خشک شد. آب ولرم.",
        نور: "نور زیاد فیلتر شده.",
        کوددهی: "کود کامل.",
        قلمه: "ساقه نیمه چوبی.",
        آفات: "شپشک سپردار.",
        گروه: "درختچه‌ها و نخل‌ها",
        عیب_یابی: [
          { مشکل: "ریزش ناگهانی برگ‌ها", علت: "شوک (جابجایی، تغییر دما).", راه_حل: "گیاه را جابجا نکنید." },
          { مشکل: "برگ‌های چسبناک", علت: "آفت (شپشک).", راه_حل: "سمپاشی کنید." }
        ],
        دانشنامه: {
          خاستگاه: "آسیا.",
          دما: "۱۸ تا ۲۶ درجه.",
          خاک_ایده‌آل: "خاک باغچه + خاک برگ.",
          نام_علمی: "Ficus benjamina"
        }
    },

    // ==========================================
    // گروه ۴: گیاهان گلدار و زینتی
    // ==========================================
    "شمعدانی": {
        آبیاری: "خشک شدن نسبی خاک. آبیاری زیاد را دوست ندارد.",
        نور: "آفتاب کامل و مستقیم (پشت پنجره یا بالکن).",
        کوددهی: "کود گلدهی در بهار و تابستان.",
        قلمه: "قلمه ساقه در خاک.",
        آفات: "شپشک و کرم.",
        گروه: "گیاهان گلدار",
        عیب_یابی: [
            { مشکل: "زرد شدن برگ‌ها", علت: "آبیاری بیش از حد.", راه_حل: "اجازه دهید خاک خشک شود." },
            { مشکل: "گل ندادن", علت: "نور کم یا کود نامناسب.", راه_حل: "به آفتاب مستقیم ببرید." }
        ],
        دانشنامه: {
            خاستگاه: "آفریقای جنوبی.",
            دما: "۱۰ تا ۲۵ درجه. هوای تازه دوست دارد.",
            خاک_ایده‌آل: "خاک باغچه سنگین.",
            نام_علمی: "Pelargonium"
        }
    },
    "ارکیده (فالانوپسیس)": {
        آبیاری: "هفته‌ای یکبار غرقابی (تشت آب). ریشه هوا می‌خواهد.",
        نور: "نور غیرمستقیم فیلتر شده (پشت پرده).",
        کوددهی: "کود مخصوص ارکیده.",
        قلمه: "پاجوش (کیکی).",
        آفات: "شپشک آردآلود.",
        گروه: "گیاهان گلدار",
        عیب_یابی: [
            { مشکل: "ریختن غنچه‌ها", علت: "تغییر دما یا جریان باد کولر.", راه_حل: "از باد دور نگه دارید." },
            { مشکل: "پوسیدگی ریشه", علت: "خاک نامناسب یا ماندن آب.", راه_حل: "فقط در پوسته درخت (بارک) بکارید نه خاک." }
        ],
        دانشنامه: {
            خاستگاه: "آسیای شرقی.",
            دما: "۱۸ تا ۲۸ درجه. رطوبت بالا.",
            خاک_ایده‌آل: "پوسته درخت (بدون خاک معمولی).",
            نام_علمی: "Phalaenopsis"
        }
    },
    "بنفشه آفریقایی": {
        آبیاری: "فقط از زیر گلدان. آب روی برگ نریزد.",
        نور: "نور مصنوعی یا پشت پنجره (متوسط).",
        کوددهی: "کود مخصوص بنفشه.",
        قلمه: "برگ.",
        آفات: "کنه سیکلامن.",
        گروه: "گیاهان گلدار",
        عیب_یابی: [
            { مشکل: "لکه‌های زرد روی برگ", علت: "ریختن آب سرد روی برگ.", راه_حل: "از زیر آبیاری کنید." },
            { مشکل: "گل ندادن", علت: "نور کم یا کود نامناسب.", راه_حل: "از کود گلدهی استفاده کنید." }
        ],
        دانشنامه: {
            خاستگاه: "تانزانیا.",
            دما: "۱۸ تا ۲۴ درجه.",
            خاک_ایده‌آل: "مخلوط پیت ماس و پرلیت.",
            نام_علمی: "Saintpaulia"
        }
    },
    "حسن یوسف": {
        آبیاری: "خاک همیشه مرطوب باشد.",
        نور: "نور زیاد (برای رنگ بهتر).",
        کوددهی: "کود نیتروژن بالا.",
        قلمه: "ساقه در آب.",
        آفات: "شپشک آردآلود.",
        گروه: "گیاهان گلدار",
        عیب_یابی: [
            { مشکل: "ریزش برگ", علت: "سرما یا تشنگی.", راه_حل: "دما و آب را چک کنید." },
            { مشکل: "سبز شدن برگ‌ها", علت: "نور کم.", راه_حل: "پشت پنجره جنوبی بگذارید." }
        ],
        دانشنامه: {
            خاستگاه: "جنوب شرق آسیا.",
            دما: "۲۰ تا ۲۵ درجه.",
            خاک_ایده‌آل: "خاک باغچه.",
            نام_علمی: "Coleus"
        }
    },

    // ==========================================
    // گروه ۵: خاص، حساس و گوشتخوار
    // ==========================================
    "ونوس حشره‌خوار": {
        آبیاری: "فقط آب مقطر یا آب باران (آب لوله کشی مرگبار است). خاک همیشه خیس.",
        نور: "نور بسیار زیاد.",
        کوددهی: "هرگز کود ندهید (ریشه می‌سوزد).",
        قلمه: "تقسیم بوته.",
        آفات: "شته.",
        گروه: "خاص و حساس",
        عیب_یابی: [
            { مشکل: "سیاه شدن تله‌ها", علت: "طبیعی است (بعد از ۳-۴ بار شکار) یا دستکاری زیاد.", راه_حل: "تله‌های سیاه را بچینید." },
            { مشکل: "مرگ ناگهانی", علت: "استفاده از آب معمولی (املاح).", راه_حل: "فقط آب مقطر استفاده کنید." }
        ],
        دانشنامه: {
            خاستگاه: "آمریکا (کارولینا).",
            دما: "خواب زمستانی نیاز دارد.",
            خاک_ایده‌آل: "پیت ماس خالص (بدون مواد مغذی).",
            نام_علمی: "Dionaea muscipula"
        }
    },
    "بامبو (لاکی بامبو)": {
        آبیاری: "تعویض آب گلدان هر دو هفته. آب بدون کلر.",
        نور: "نور فیلتر شده (در نور مستقیم زرد می‌شود).",
        کوددهی: "قطره مخصوص بامبو.",
        قلمه: "قلمه ساقه.",
        آفات: "قارچ در آب.",
        گروه: "خاص و حساس",
        عیب_یابی: [
            { مشکل: "زرد شدن ساقه", علت: "قارچ یا کلر آب.", راه_حل: "قسمت زرد را ببرید و آب را عوض کنید." },
            { مشکل: "برگ‌های رنگ پریده", علت: "نور خیلی کم.", راه_حل: "کمی نور را بیشتر کنید." }
        ],
        دانشنامه: {
            خاستگاه: "غرب آفریقا.",
            دما: "۱۸ تا ۳۵ درجه.",
            خاک_ایده‌آل: "آب یا خاک ژله‌ای.",
            نام_علمی: "Dracaena sanderiana"
        }
    },
    "سرخس بوستون": {
        آبیاری: "خاک همیشه باید مرطوب باشد. خشکی مساوی مرگ.",
        نور: "سایه تا نور متوسط.",
        کوددهی: "بسیار کم.",
        قلمه: "تقسیم بوته.",
        آفات: "شپشک.",
        گروه: "خاص و حساس",
        عیب_یابی: [
            { مشکل: "خشک شدن نوک برگ‌ها", علت: "رطوبت کم محیط.", راه_حل: "فقط با رطوبت بالا (حمام یا جزیره) زنده می‌ماند." },
            { مشکل: "ریزش برگ", علت: "خشکی خاک.", راه_حل: "خاک را چک کنید." }
        ],
        دانشنامه: {
            خاستگاه: "مناطق گرمسیری.",
            دما: "۱۸ تا ۲۴ درجه.",
            خاک_ایده‌آل: "خاک جنگلی.",
            نام_علمی: "Nephrolepis exaltata"
        }
    },

    // ==========================================
    // گروه ۶: رطوبت‌دوست و خاص (سایر)
    // ==========================================
    "سینگونیوم (پنجه کلاغی)": {
        آبیاری: "سطح خاک خشک شود. رطوبت دوست.",
        نور: "متوسط.",
        کوددهی: "هر دو هفته.",
        قلمه: "ساقه در آب.",
        آفات: "کنه.",
        گروه: "رطوبت‌دوست و خاص",
        عیب_یابی: [
            { مشکل: "رنگ پریدگی برگ‌ها", علت: "نور خیلی زیاد.", راه_حل: "نور را فیلتر کنید." },
            { مشکل: "رشد علفی و دراز", علت: "نور کم.", راه_حل: "نور را بیشتر کنید." }
        ],
        دانشنامه: {
            خاستگاه: "آمریکای لاتین.",
            دما: "۱۸ تا ۲۴ درجه.",
            خاک_ایده‌آل: "خاک پیت ماس.",
            نام_علمی: "Syngonium"
        }
    },
    "تردسکانتیا (برگ بیدی)": {
        آبیاری: "خاک همیشه مرطوب باشد. خشکی را دوست ندارد.",
        نور: "نور زیاد فیلتر شده (برای حفظ رنگ بنفش).",
        کوددهی: "کود ۱۰-۱۰-۱۰ هر دو هفته.",
        قلمه: "ساقه در آب (ریشه‌دهی ۳ روزه).",
        آفات: "شپشک.",
        گروه: "رطوبت‌دوست و خاص",
        عیب_یابی: [
          { مشکل: "سبز شدن برگ‌های بنفش", علت: "نور ناکافی.", راه_حل: "به پنجره نزدیک‌تر کنید." },
          { مشکل: "خشک شدن ساقه‌ها از پایین", علت: "پیر شدن گیاه.", راه_حل: "قلمه بگیرید و گیاه را جوان کنید." }
        ],
        دانشنامه: {
          خاستگاه: "مکزیک.",
          دما: "۱۸ تا ۲۵ درجه.",
          خاک_ایده‌آل: "خاک باغچه معمولی.",
          نام_علمی: "Tradescantia zebrina"
        }
    },
    "فیلودندرون (سبز/ایمپریال)": {
        آبیاری: "خشک شدن سطح خاک (حدود ۳ سانت). مقاوم‌تر از پتوس.",
        نور: "متوسط تا کم.",
        کوددهی: "ماهی یکبار.",
        قلمه: "ساقه.",
        آفات: "کنه.",
        گروه: "رطوبت‌دوست و خاص",
        عیب_یابی: [
            { مشکل: "برگ‌های زرد", علت: "آبیاری زیاد.", راه_حل: "زهکشی را چک کنید." },
            { مشکل: "رشد نکردن", علت: "گلدان کوچک یا نور خیلی کم.", راه_حل: "تعویض گلدان یا افزایش نور." }
        ],
        دانشنامه: {
            خاستگاه: "آمریکای جنوبی.",
            دما: "۱۸ تا ۲۶ درجه.",
            خاک_ایده‌آل: "خاک سبک و غنی.",
            نام_علمی: "Philodendron"
        }
    },
    "کالاتیا (گیاه دعاگو)": {
      آبیاری: "خاک همیشه مرطوب باشد (اما خیس نماند). حساس به کلر آب.",
      نور: "متوسط غیرمستقیم. نور مستقیم برگ را می‌سوزاند.",
      کوددهی: "کود رقیق شده (نصف غلظت) ماهی یکبار.",
      قلمه: "تقسیم بوته هنگام تعویض گلدان.",
      آفات: "کنه تارعنکبوتی (در هوای خشک).",
      گروه: "رطوبت‌دوست و خاص",
      عیب_یابی: [
        { مشکل: "خشکی و قهوه‌ای شدن حاشیه برگ", علت: "رطوبت کم محیط یا املاح آب.", راه_حل: "از آب جوشیده سرد شده و بخور سرد استفاده کنید." },
        { مشکل: "رنگ پریدگی نقوش برگ", علت: "نور خیلی زیاد.", راه_حل: "به محل کم‌نورتر منتقل شود." }
      ],
      دانشنامه: {
        خاستگاه: "جنگل‌های بارانی برزیل.",
        دما: "۱۸ تا ۲۴ درجه (دمای ثابت).",
        خاک_ایده‌آل: "پیت ماس + پرلیت (اسیدی و مرطوب).",
        نام_علمی: "Calathea"
      }
    },
    "آلوکازیا (بابا آدم)": {
      آبیاری: "سطح خاک خشک شود. آبیاری با آب ولرم.",
      نور: "نور زیاد اما غیرمستقیم (پشت پنجره جنوبی).",
      کوددهی: "کود پتاس بالا و آهن.",
      قلمه: "جدا کردن پاجوش ریزوم‌دار.",
      آفات: "کنه تارعنکبوتی (بسیار مستعد).",
      گروه: "رطوبت‌دوست و خاص",
      عیب_یابی: [
        { مشکل: "شل شدن و افتادگی ساقه", علت: "تشنگی یا شوک دمایی.", راه_حل: "سیراب کنید و دما را چک کنید." },
        { مشکل: "زرد شدن برگ مسن", علت: "طبیعی است (جایگزینی برگ).", راه_حل: "برگ زرد را جدا کنید." },
        { مشکل: "نقاط زرد ریز روی برگ", علت: "کنه.", راه_حل: "شستشو با آب و صابون حشره‌کش." }
      ],
      دانشنامه: {
        خاستگاه: "آسیای گرمسیری.",
        دما: "۲۰ تا ۲۸ درجه. خواب زمستانی دارد.",
        خاک_ایده‌آل: "غنی، سبک و دارای مواد آلی زیاد.",
        نام_علمی: "Alocasia"
      }
    },
    "برگ انجیری (مونسترا)": {
        آبیاری: "دو سوم خاک خشک شود. حساس به غرقابی.",
        نور: "نور روشن غیرمستقیم.",
        کوددهی: "ماهی یکبار در تابستان.",
        قلمه: "ساقه دارای ریشه هوایی.",
        آفات: "تریپس و شپشک.",
        گروه: "رطوبت‌دوست و خاص",
        عیب_یابی: [
            { مشکل: "برگ‌های بدون شکاف", علت: "نور کم یا سن کم گیاه.", راه_حل: "نور را بیشتر کنید." },
            { مشکل: "زرد شدن و قهوه‌ای شدن برگ‌ها", علت: "آبیاری بیش از حد.", راه_حل: "زهکشی را چک کنید." }
        ],
        دانشنامه: {
            خاستگاه: "جنگل‌های بارانی مکزیک.",
            دما: "۱۸ تا ۳۰ درجه.",
            خاک_ایده‌آل: "خاک سبک و غنی.",
            نام_علمی: "Monstera deliciosa"
        }
    }
  };
  
  // نگاشت آیکون‌ها برای نمایش زیباتر
  const iconMap = {
    آبیاری: "fa-tint",
    نور: "fa-sun",
    کوددهی: "fa-seedling",
    قلمه: "fa-cut",
    آفات: "fa-bug",
    دما: "fa-temperature-high",
    خاستگاه: "fa-globe-americas",
    خاک_ایده‌آل: "fa-layer-group",
    نام_علمی: "fa-flask"
  };
  
  // پر کردن گزینه‌های فیلتر
  function populateFilters() {
    const groupFilter = document.getElementById("group-filter");
    
    // فقط فیلتر گروه را نگه می‌داریم
    const uniqueGroups = new Set();
    for (const name in plantData) {
        uniqueGroups.add(plantData[name].گروه);
    }

    groupFilter.innerHTML = '<option value="all">نمایش همه گروه‌ها</option>';
    uniqueGroups.forEach((value) => {
      const option = document.createElement("option");
      option.value = value;
      option.textContent = value;
      groupFilter.appendChild(option);
    });
  
    // پر کردن لیست نور دستی
    const lightFilter = document.getElementById("light-filter");
    lightFilter.innerHTML = `
        <option value="all">نمایش همه نورها</option>
        <option value="low">سایه‌دوست / نور کم</option>
        <option value="medium">نور متوسط / آپارتمانی</option>
        <option value="high">پرنور / آفتاب‌دوست</option>
    `;
  }
  
  // منطق فیلترینگ
  function filterPlants() {
    const groupFilterValue = document.getElementById("group-filter").value;
    const lightFilterValue = document.getElementById("light-filter").value;
    const plantSelector = document.getElementById("plant-selector");
    const resultsDiv = document.getElementById("results");
  
    plantSelector.innerHTML = '<option value="">-- یک گیاه انتخاب کنید --</option>';
    resultsDiv.innerHTML = '<div class="empty-state"><i class="fas fa-search"></i><p>لیست گیاهان آماده است. انتخاب کنید.</p></div>';
  
    let filteredCount = 0;
  
    for (const plantName in plantData) {
      const plant = plantData[plantName];
      const groupMatch = groupFilterValue === "all" || plant.گروه === groupFilterValue;
      
      let lightMatch = true;
      if (lightFilterValue !== 'all') {
          if (lightFilterValue === 'low' && !plant.نور.includes("کم") && !plant.نور.includes("سایه")) lightMatch = false;
          if (lightFilterValue === 'medium' && !plant.نور.includes("متوسط") && !plant.نور.includes("فیلتر")) lightMatch = false;
          if (lightFilterValue === 'high' && !plant.نور.includes("زیاد") && !plant.نور.includes("آفتاب")) lightMatch = false;
      }
  
      if (groupMatch && lightMatch) {
        const option = document.createElement("option");
        option.value = plantName;
        option.textContent = plantName;
        plantSelector.appendChild(option);
        filteredCount++;
      }
    }
  
    if (filteredCount === 0) {
      plantSelector.innerHTML = '<option value="">-- موردی با این مشخصات یافت نشد --</option>';
    }
  }
  
  // تابع اصلی نمایش اطلاعات
  function displayPlantInfo() {
    const selector = document.getElementById("plant-selector");
    const selectedPlant = selector.value;
    const resultsDiv = document.getElementById("results");
  
    if (!selectedPlant) return;
  
    const info = plantData[selectedPlant];
  
    let htmlContent = `
      <div class="plant-card">
          <div class="plant-header">
              <h2><i class="fas fa-leaf"></i> ${selectedPlant}</h2>
              <span class="badge">${info.گروه}</span>
          </div>
          
          <div class="info-grid">
    `;
  
    for (const key in info) {
      if (key !== "گروه" && key !== "عیب_یابی" && key !== "دانشنامه") {
        const iconClass = iconMap[key] || "fa-check";
        htmlContent += `
          <div class="info-box">
              <div class="info-icon"><i class="fas ${iconClass}"></i></div>
              <div class="info-content">
                  <strong>${key}</strong>
                  <span>${info[key]}</span>
              </div>
          </div>
        `;
      }
    }
    htmlContent += `</div>`;
  
    // === بخش عیب‌یابی ===
    if (info.عیب_یابی && info.عیب_یابی.length > 0) {
        htmlContent += `
          <div style="padding: 25px; background: #fff5f5;">
             <h3 style="color: #c62828; margin-top:0; margin-bottom:15px; display:flex; align-items:center; gap:10px;">
                <i class="fas fa-user-md"></i> عیب‌یابی فوری و تخصصی
             </h3>
             <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 15px;">
        `;
        
        info.عیب_یابی.forEach(item => {
            htmlContent += `
                <div style="background: white; border-left: 4px solid #ef5350; border-radius: 8px; padding: 15px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                    <div style="font-weight: bold; color: #d32f2f; margin-bottom: 8px;">
                        <i class="fas fa-exclamation-circle"></i> ${item.مشکل}
                    </div>
                    <div style="font-size: 0.9rem; color: #555; margin-bottom: 5px;">
                        <span style="font-weight:bold; color:#333;">علت:</span> ${item.علت}
                    </div>
                    <div style="font-size: 0.9rem; color: #2e7d32; background: #e8f5e9; padding: 5px 8px; border-radius: 4px; display:inline-block; margin-top:5px;">
                        <i class="fas fa-check"></i> <b>راه حل:</b> ${item.راه_حل}
                    </div>
                </div>
            `;
        });
        
        htmlContent += `</div></div>`;
    }
  
    // === بخش دانشنامه ===
    if (info.دانشنامه) {
      htmlContent += `
        <div style="padding: 25px; border-top: 1px solid #eee;">
            <h3 style="color: #1565c0; margin-top:0;"><i class="fas fa-book"></i> شناسنامه گیاه</h3>
            <div class="wiki-grid" style="display:grid; grid-template-columns: 1fr 1fr; gap:10px;">
      `;
      for (const wikiKey in info.دانشنامه) {
        const iconClass = iconMap[wikiKey] || "fa-info";
        htmlContent += `
          <div style="display:flex; align-items:center; gap:8px; background:#f0f7ff; padding:8px; border-radius:6px;">
              <i class="fas ${iconClass}" style="color:#1976d2;"></i>
              <span style="font-size:0.9rem;"><b>${wikiKey.replace('_', ' ')}:</b> ${info.دانشنامه[wikiKey]}</span>
          </div>
        `;
      }
      htmlContent += `</div></div>`;
    }
  
    htmlContent += `</div>`;
    resultsDiv.innerHTML = htmlContent;
  }
  
  window.onload = function () {
    populateFilters();
    filterPlants();
  };
  
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker
        .register('service-worker.js')
        .then((registration) => {
          console.log('Service Worker registered:', registration.scope);
        })
        .catch((error) => {
          console.log('Service Worker registration failed:', error);
        });
    });
  }