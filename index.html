<!DOCTYPE html>
<html lang="fa" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>ุฏุณุชุงุฑ ููุดููุฏ ฺฏุงูุงู | Plant Expert</title>

    <!-- ูููุช ูุงุฑุณ ูุฒุฑ -->
    <link
      href="https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn@v33.003/Vazirmatn-font-face.css"
      rel="stylesheet"
      type="text/css"
    />
    <!-- ุขฺฉููโูุง (FontAwesome) -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <!-- โ ููุท ุงู ฺฉ - ุจุงู ููุงุฑุฏ ุงุฒ ุทุฑู @import ุฏุฑ styles.css ูโุขูุฏ -->
    <link rel="stylesheet" href="styles.css" />

    <!-- ุชูุธูุงุช PWA -->
    <link rel="manifest" href="manifest.json" />
    <meta name="theme-color" content="#2d6a4f" />
    <link rel="apple-touch-icon" href="icon-192.png" />
    <!-- ุดุฑูุน ฺฉุฏ ุฏุจุงฺฏุฑ Eruda -->
    <script src="//cdn.jsdelivr.net/npm/eruda"></script>
    <script>
      eruda.init();
    </script>
    <!-- ูพุงุงู ฺฉุฏ ุฏุจุงฺฏุฑ -->

    <!-- โ ุญุฐู favicon ุงฺฏุฑ ููุฌูุฏ ูุณุช -->
    <!-- <link rel="icon" type="image/png" href="favicon.ico"> -->

    <!-- ุง ุงุณุชูุงุฏู ุงุฒ emoji favicon -->
    <link
      rel="icon"
      href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>๐ฑ</text></svg>"
    />
  </head>
  <body>
    <div class="main-content">
      <!-- ุชุจ ฑ: ุฏุงูุดูุงูู ู ุฌุณุชุฌู (Home) -->
      <section id="tab-home" class="tab-section active">
        <header>
          <h1><i class="fas fa-leaf"></i> ุฏุงูุดูุงูู ฺฏุงูุงู</h1>
          <div class="subtitle">ูุฑุฌุน ุชุฎุตุต ูฺฏูุฏุงุฑ ู ุฏุฑูุงู</div>
        </header>

        <div class="controls-wrapper">
          <!-- ููุงุฑ ุฌุณุชุฌู -->
          <div class="search-box">
            <i class="fas fa-search search-icon"></i>
            <input
              type="text"
              id="search-input"
              placeholder="ุฌุณุชุฌู ูุงู ฺฏุงู (ูุซูุงู: ูพุชูุณ...)"
              oninput="app.filterPlants()"
            />
            <button class="clear-btn" onclick="app.clearSearch()">
              <i class="fas fa-times"></i>
            </button>
          </div>

          <!-- ููุชุฑูุง -->
          <div class="filters">
            <div>
              <label><i class="fas fa-layer-group"></i> ุฏุณุชูโุจูุฏ:</label>
              <select id="group-filter" onchange="app.filterPlants()"></select>
            </div>
            <div>
              <label><i class="fas fa-sun"></i> ููุฑ ููุฑุฏ ูุงุฒ:</label>
              <select id="light-filter" onchange="app.filterPlants()"></select>
            </div>
          </div>

          <label
            style="
              font-size: 0.85rem;
              margin-bottom: 8px;
              display: block;
              color: var(--text-secondary);
              font-weight: 600;
            "
          >
            ูุชุงุฌ ุงูุช ุดุฏู:
          </label>
          <select
            id="plant-selector"
            onchange="app.displayPlantInfo()"
          ></select>
        </div>

        <div id="results">
          <div class="empty-state">
            <i class="fas fa-seedling"></i>
            <p>ูุงู ฺฏุงู ุฑุง ุฌุณุชุฌู ุง ุงุฒ ูุณุช ุงูุชุฎุงุจ ฺฉูุฏ.</p>
          </div>
        </div>
      </section>

      <!-- ุชุจ ฒ: ุจุงุบฺู ูู (Garden) -->
      <section id="tab-garden" class="tab-section" style="display: none">
        <header>
          <h1><i class="fas fa-home"></i> ุจุงุบฺู ูู</h1>
          <div class="subtitle">ูุฏุฑุช ุขุจุงุฑ ู ุงุฏุขูุฑโูุง</div>
        </header>
        <div id="my-garden-list" class="garden-grid">
          <!-- ูุณุช ฺฏุงูุงู ุจุง JS ูพุฑ ูโุดูุฏ -->
        </div>
        <button class="fab-add" onclick="app.switchTab('home')">
          <i class="fas fa-plus"></i> ุงูุฒูุฏู ฺฏุงู ุฌุฏุฏ
        </button>
      </section>

      <!-- ุชุจ ณ: ุขุฒููู (Quiz) -->
      <section id="tab-quiz" class="tab-section" style="display: none">
        <header>
          <h1><i class="fas fa-clipboard-check"></i> ุขุฒููู ุจุงุบุจุงู</h1>
          <div class="subtitle">ุงุทูุงุนุงุช ุฎูุฏ ุฑุง ูุญฺฉ ุจุฒูุฏ</div>
        </header>
        <div id="quiz-content" class="quiz-wrapper">
          <!-- ูุญุชูุง ุขุฒููู ุจุง JS ูพุฑ ูโุดูุฏ -->
        </div>
      </section>

      <!-- ุชุจ ด: ุขููุฒุด (Education) -->
      <section id="tab-edu" class="tab-section" style="display: none">
        <header>
          <h1><i class="fas fa-graduation-cap"></i> ูุฏุฑุณู ฺฏุงูุงู</h1>
          <div class="subtitle">ููุงูุงุช ุชุฎุตุต ู ุนูู</div>
        </header>
        <div id="edu-content" class="edu-grid">
          <!-- ูุญุชูุง ุจุง JS ุงุฒ education.json ูพุฑ ูโุดูุฏ -->
        </div>
      </section>

      <!-- ุชุจ ต: ุชูุธูุงุช (Settings) -->
      <section id="tab-settings" class="tab-section" style="display: none">
        <header>
          <h1><i class="fas fa-cog"></i> ุชูุธูุงุช</h1>
          <div class="subtitle">ุดุฎุตโุณุงุฒ ู ูพุดุชุจุงูโฺฏุฑ</div>
        </header>

        <div class="settings-container">
          <!-- ===================== Accordion ฑ: ุธุงูุฑ ===================== -->
          <div class="settings-accordion">
            <button
              class="accordion-header"
              onclick="app.toggleAccordion(this)"
            >
              <span>โ๏ธ ุธุงูุฑ ู ุชู</span>
              <i class="fas fa-chevron-down"></i>
            </button>

            <div class="accordion-content">
              <!-- ุญุงูุช ุดุจ -->
              <div class="setting-item">
                <div class="setting-label">
                  <i class="fas fa-moon"></i>
                  <span>ุญุงูุช ุดุจ</span>
                </div>
                <label class="switch">
                  <input
                    type="checkbox"
                    id="dark-mode-toggle"
                    onchange="app.toggleDarkMode()"
                  />
                  <span class="slider"></span>
                </label>
              </div>

              <!-- ุณุงุฒ ูููุช -->
              <div
                class="setting-item"
                style="flex-direction: column; align-items: stretch"
              >
                <div class="setting-label">
                  <i class="fas fa-text-height"></i>
                  <span>ุณุงุฒ ูููุช</span>
                </div>
                <div style="display: flex; gap: 8px">
                  <button
                    class="btn-small"
                    onclick="app.changeFontSize('small')"
                    style="flex: 1; padding: 8px"
                  >
                    ฺฉูฺฺฉ
                  </button>
                  <button
                    class="btn-small"
                    onclick="app.changeFontSize('medium')"
                    style="flex: 1; padding: 8px"
                  >
                    ูุชูุณุท
                  </button>
                  <button
                    class="btn-small"
                    onclick="app.changeFontSize('large')"
                    style="flex: 1; padding: 8px"
                  >
                    ุจุฒุฑฺฏ
                  </button>
                </div>
              </div>
            </div>
          </div>

          <!-- ===================== Accordion ฒ: ุงุทูุงุนุงุช ฺฉุงุฑุจุฑ ===================== -->
          <div class="settings-accordion">
            <button
              class="accordion-header"
              onclick="app.toggleAccordion(this)"
            >
              <span>๐ค ูพุฑููุงู ูู</span>
              <i class="fas fa-chevron-down"></i>
            </button>

            <div class="accordion-content">
              <!-- ุชุตูุฑ ูพุฑููุงู -->
              <div style="text-align: center; margin-bottom: 15px">
                <label
                  style="
                    display: block;
                    margin-bottom: 10px;
                    font-size: 0.9rem;
                    color: var(--text-secondary);
                    font-weight: 600;
                  "
                >
                  <i class="fas fa-image"></i> ุชุตูุฑ ูพุฑููุงู:
                </label>
                <div
                  id="profile-preview"
                  style="
                    width: 80px;
                    height: 80px;
                    border-radius: 50%;
                    background: var(--bg-input);
                    margin: 0 auto 10px;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    font-size: 2rem;
                    overflow: hidden;
                    border: 3px solid var(--border-glass);
                    transition: all 0.3s ease;
                    cursor: pointer;
                  "
                >
                  <i class="fas fa-user"></i>
                </div>
                <input
                  type="file"
                  id="profile-image-input"
                  accept="image/*"
                  onchange="app.previewProfileImage(this)"
                  style="display: none"
                />
                <button
                  type="button"
                  onclick="document.getElementById('profile-image-input').click()"
                  style="
                    width: 100%;
                    padding: 8px;
                    background: var(--bg-input);
                    color: var(--text-main);
                    border: 1px solid var(--border-glass);
                    border-radius: 8px;
                    cursor: pointer;
                    margin-bottom: 12px;
                    transition: all 0.3s ease;
                    font-weight: 600;
                  "
                >
                  <i class="fas fa-upload"></i> ุงูุชุฎุงุจ ุนฺฉุณ
                </button>
              </div>

              <!-- ูุงู ฺฉุงุฑุจุฑ -->
              <input
                type="text"
                id="username-input"
                placeholder="ูุงู ฺฉุงุฑุจุฑ"
                style="
                  width: 100%;
                  padding: 12px;
                  border: 2px solid var(--border-glass);
                  border-radius: 12px;
                  background: var(--bg-input);
                  color: var(--text-main);
                  margin-bottom: 12px;
                  transition: all 0.3s ease;
                  font-family: inherit;
                "
              />

              <!-- ุณุทุญ ุณุฎุช -->
              <select
                id="difficulty-select"
                style="
                  width: 100%;
                  padding: 12px;
                  border: 2px solid var(--border-glass);
                  border-radius: 12px;
                  background: var(--bg-input);
                  color: var(--text-main);
                  margin-bottom: 12px;
                  transition: all 0.3s ease;
                  font-family: inherit;
                "
              >
                <option value="easy">๐ข ุขุณุงู (ฺฉูุชุฑ ุงุฏุขูุฑ)</option>
                <option value="medium" selected>๐ก ูุชูุณุท</option>
                <option value="hard">๐ด ุณุฎุช (ุจุดุชุฑ ุงุฏุขูุฑ)</option>
              </select>

              <button
                class="btn-confirm"
                onclick="app.saveProfile()"
                style="
                  width: 100%;
                  padding: 12px;
                  background: linear-gradient(
                    135deg,
                    var(--primary-green),
                    var(--secondary-green)
                  );
                  color: white;
                  border: none;
                  border-radius: 12px;
                  font-weight: 600;
                  cursor: pointer;
                  display: flex;
                  align-items: center;
                  justify-content: center;
                  gap: 8px;
                  transition: all 0.3s ease;
                  font-size: 0.95rem;
                "
              >
                <i class="fas fa-save"></i> ุฐุฎุฑู
              </button>
            </div>
          </div>

          <!-- ===================== Accordion ณ: ุงุทูุงุนุงุช ุฑุณุงู ===================== -->
          <div class="settings-accordion">
            <button
              class="accordion-header"
              onclick="app.toggleAccordion(this)"
            >
              <span>๐ ุงุทูุงุนุงุช ุฑุณุงู</span>
              <i class="fas fa-chevron-down"></i>
            </button>

            <div class="accordion-content">
              <div class="setting-item">
                <div class="setting-label">
                  <i class="fas fa-bell"></i>
                  <span>ููุชูฺฉุดูโูุง ูุนุงู</span>
                </div>
                <label class="switch">
                  <input
                    type="checkbox"
                    id="notifications-toggle"
                    onchange="app.toggleNotifications()"
                  />
                  <span class="slider"></span>
                </label>
              </div>

              <p
                style="
                  font-size: 0.85rem;
                  color: var(--text-secondary);
                  margin: 12px 0;
                "
              >
                <i class="fas fa-info-circle"></i> ุงุฏุขูุฑ ุฎูุฏฺฉุงุฑ ุจุฑุง:
              </p>
              <ul
                style="
                  font-size: 0.85rem;
                  color: var(--text-secondary);
                  margin: 8px 0;
                  padding-right: 20px;
                "
              >
                <li>๐ง ุขุจุงุฑ ฺฏุงูุงู</li>
                <li>๐ฎ ูุถุนุช ุจุงุฒ</li>
                <li>โฐ ุงุฏุขูุฑโูุง ุฒูุงูโุจูุฏ ุดุฏู</li>
              </ul>
            </div>
          </div>

          <!-- ===================== Accordion ด: ูพุดุชุจุงูโฺฏุฑ ===================== -->
          <div class="settings-accordion">
            <button
              class="accordion-header"
              onclick="app.toggleAccordion(this)"
            >
              <span>๐พ ูพุดุชุจุงูโฺฏุฑ ู ุจุงุฒฺฏุฑุฏุงู</span>
              <i class="fas fa-chevron-down"></i>
            </button>

            <div class="accordion-content">
              <p
                style="
                  font-size: 0.85rem;
                  color: var(--text-secondary);
                  margin-bottom: 12px;
                "
              >
                <i class="fas fa-shield-alt"></i> ุฏุงุฏูโูุง ุฎูุฏ ุฑุง ุงูู ูฺฏูุฏุงุฑ
                ฺฉูุฏ
              </p>

              <div style="display: flex; gap: 8px; margin-bottom: 12px">
                <button
                  onclick="app.backupData()"
                  class="btn-backup"
                  style="flex: 1"
                >
                  <i class="fas fa-download"></i> ุฏุงูููุฏ
                </button>
                <button
                  onclick="app.triggerRestore()"
                  class="btn-restore"
                  style="flex: 1"
                >
                  <i class="fas fa-upload"></i> ุจุงุฒฺฏุฑุฏุงู
                </button>
              </div>

              <button
                onclick="app.exportAllData()"
                style="
                  width: 100%;
                  background: var(--info-blue);
                  color: white;
                  border: none;
                  padding: 10px;
                  border-radius: 12px;
                  font-weight: 600;
                  margin-bottom: 12px;
                "
              >
                <i class="fas fa-file-export"></i> ุตุงุฏุฑ ฺฉุฑุฏู (Export)
              </button>

              <input
                type="file"
                id="restore-input"
                accept=".json"
                style="display: none"
                onchange="app.restoreData(this)"
              />

              <p
                style="
                  font-size: 0.75rem;
                  color: var(--text-muted);
                  margin-top: 12px;
                  padding-top: 12px;
                  border-top: 1px solid var(--border-glass);
                "
              >
                <i class="fas fa-clock"></i> ุขุฎุฑู ุจฺฉุงูพ:
                <span id="last-backup-time">ูุฑฺฏุฒ</span>
              </p>
            </div>
          </div>

          <!-- ===================== Accordion ต: ุชูุธูุงุช ูพุดุฑูุชู ===================== -->
          <div class="settings-accordion">
            <button
              class="accordion-header"
              onclick="app.toggleAccordion(this)"
            >
              <span>โ๏ธ ุชูุธูุงุช ูพุดุฑูุชู</span>
              <i class="fas fa-chevron-down"></i>
            </button>

            <div class="accordion-content">
              <p
                style="
                  font-size: 0.85rem;
                  color: var(--warning-red);
                  margin-bottom: 12px;
                "
              >
                <i class="fas fa-exclamation-triangle"></i> ุนููุงุช ุฎุทุฑูุงฺฉ -
                ุงุญุชุงุท ฺฉูุฏ
              </p>

              <button
                onclick="app.clearCache()"
                style="
                  width: 100%;
                  background: #ff9800;
                  color: white;
                  border: none;
                  padding: 10px;
                  border-radius: 12px;
                  font-weight: 600;
                  margin-bottom: 8px;
                "
              >
                <i class="fas fa-trash"></i> ูพุงฺฉ ฺฉุฑุฏู ฺฉุด
              </button>

              <button
                onclick="app.resetData()"
                style="
                  width: 100%;
                  background: var(--warning-red);
                  color: white;
                  border: none;
                  padding: 10px;
                  border-radius: 12px;
                  font-weight: 600;
                "
              >
                <i class="fas fa-exclamation-triangle"></i> ุฑุณุช ฺฉู ุฏุงุฏูโูุง
              </button>

              <p
                style="
                  font-size: 0.75rem;
                  color: var(--text-muted);
                  margin-top: 12px;
                  padding-top: 12px;
                  border-top: 1px solid var(--border-glass);
                "
              >
                ๐ฆ ุญุฌู ุงุณุชูุงุฏู ุดุฏู: <span id="storage-usage">ูุญุงุณุจู...</span>
              </p>
            </div>
          </div>

          <!-- ===================== Accordion ถ: ุฏุฑุจุงุฑู ุจุฑูุงูู ===================== -->
          <div class="settings-accordion">
            <button
              class="accordion-header"
              onclick="app.toggleAccordion(this)"
            >
              <span>โน๏ธ ุฏุฑุจุงุฑู ุจุฑูุงูู</span>
              <i class="fas fa-chevron-down"></i>
            </button>

            <div class="accordion-content">
              <div style="text-align: center; padding: 20px">
                <h3 style="margin: 0 0 10px 0; font-size: 1.3rem">
                  ๐ฑ MyPlants
                </h3>
                <p style="margin: 5px 0; font-size: 0.9rem">ูุณุฎู 1.2.0</p>
                <p
                  style="
                    margin: 5px 0;
                    font-size: 0.85rem;
                    color: var(--text-secondary);
                  "
                >
                  ุฏุณุชุงุฑ ููุดููุฏ ฺฏูุฏุงุฑ ู ุจุงุบุจุงู
                </p>

                <div
                  style="
                    background: var(--bg-input);
                    padding: 12px;
                    border-radius: 12px;
                    margin: 15px 0;
                  "
                >
                  <p style="margin: 5px 0; font-size: 0.8rem">
                    โจ <strong>ูฺฺฏโูุง:</strong><br />
                    ๐ ุฏุงูุดูุงูู ฑฒฐฐ+ ฺฏุงู<br />
                    ๐ฎ ุจุงุฒ ุชุนุงูู<br />
                    ๐ ุฏูุชุฑฺู ุฎุงุทุฑุงุช<br />
                    ๐งช ุขุฒููู ุชุฎุตุต
                  </p>
                </div>

                <p style="margin: 10px 0; font-size: 0.8rem">
                  ุชูุณุนู: <strong>ูุฑุชุถ ุนุจุฏ</strong><br />
                  ยฉ 2025 - ุชูุงู ุญููู ูุญููุธ
                </p>
              </div>

              <div class="setting-item developer-card" style="margin-top: 12px">
                <div class="dev-avatar">
                  <i class="fas fa-user-tie"></i>
                </div>
                <h3 class="dev-name">ูุฑุชุถ ุนุจุฏ</h3>
                <span class="dev-title">ุชูุณุนูโุฏููุฏู ู ุทุฑุงุญ ูุฑูโุงูุฒุงุฑ</span>
                <a href="mailto:morteza.abdi@gmail.com" class="dev-email">
                  <i class="fas fa-envelope"></i> morteza.abdi@gmail.com
                </a>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- ุชุจ ถ: ุจุงุฒ (Game) -->
      <section id="tab-game" class="tab-section" style="display: none">
        <header>
          <h1><i class="fas fa-gamepad"></i> ุจุงุฒ ฺฏูุฏุงุฑ</h1>
          <div class="subtitle">ูพุฑูุฑุดุ ูุฑุงูุจุช ู ฺฉุณุจ ุฌูุงุฒ</div>
        </header>
        <div id="game-content" class="quiz-wrapper">
          <!-- ูุญุชูุง ุจุงุฒ ุจุง JS ูพุฑ ูโุดูุฏ -->
        </div>
      </section>
    </div>

    <!-- ููุงุฑ ูุงูุจุฑ ูพุงู (Bottom Navigation) -->
    <nav class="bottom-nav">
      <button class="nav-item active" onclick="app.switchTab('home')">
        <i class="fas fa-search"></i>
        <span>ุฏุงูุดูุงูู</span>
      </button>
      <button class="nav-item" onclick="app.switchTab('garden')">
        <i class="fas fa-seedling"></i>
        <span>ุจุงุบฺู</span>
      </button>
      <button class="nav-item" onclick="app.switchTab('quiz')">
        <i class="fas fa-clipboard-list"></i>
        <span>ุขุฒููู</span>
      </button>
      <button class="nav-item" onclick="app.switchTab('edu')">
        <i class="fas fa-book-open"></i>
        <span>ุขููุฒุด</span>
      </button>
      <button class="nav-item" onclick="app.switchTab('settings')">
        <i class="fas fa-cog"></i>
        <span>ุชูุธูุงุช</span>
      </button>
      <button class="nav-item" onclick="app.switchTab('game')">
        <i class="fas fa-gamepad"></i>
        <span>ุจุงุฒ</span>
      </button>
    </nav>

    <!-- ููุฏุงู ุงูุฒูุฏู ุจู ุจุงุบฺู -->
    <div id="add-modal" class="modal">
      <div class="modal-content" style="max-width: 450px">
        <div
          style="
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 12px;
            border-bottom: 1px solid var(--border-glass);
          "
        >
          <h3 style="margin: 0; font-size: 1.1rem">
            <i class="fas fa-plus"></i> ุงูุฒูุฏู ฺฏุงู ุฌุฏุฏ
          </h3>
          <button
            onclick="app.closeModal('add-modal')"
            style="
              background: none;
              border: none;
              font-size: 1.3rem;
              cursor: pointer;
              color: var(--text-secondary);
            "
          >
            <i class="fas fa-times"></i>
          </button>
        </div>

        <!-- ูุงู ุงูุชุฎุงุจ -->
        <div style="margin-bottom: 12px">
          <label
            style="
              display: block;
              margin-bottom: 6px;
              color: var(--text-secondary);
              font-size: 0.9rem;
              font-weight: 600;
            "
          >
            <i class="fas fa-tag"></i> ูุงู ุงูุชุฎุงุจ:
          </label>
          <input
            type="text"
            id="modal-nickname"
            placeholder="ูุซูุงู: ุณุงูุณูุฑุง ูพุฐุฑุง"
            style="
              width: 100%;
              padding: 12px;
              border: 2px solid var(--border-glass);
              border-radius: 12px;
              background: var(--bg-input);
              color: var(--text-main);
              font-family: inherit;
              box-sizing: border-box;
              transition: all 0.3s ease;
            "
          />
        </div>

        <!-- ุฏูุฑู ุขุจุงุฑ -->
        <div style="margin-bottom: 12px">
          <label
            style="
              display: block;
              margin-bottom: 6px;
              color: var(--text-secondary);
              font-size: 0.9rem;
              font-weight: 600;
            "
          >
            <i class="fas fa-calendar-days"></i> ุฏูุฑูโ ุขุจุงุฑ (ุฑูุฒ):
          </label>
          <input
            type="number"
            id="modal-days"
            value="7"
            min="1"
            max="60"
            style="
              width: 100%;
              padding: 12px;
              border: 2px solid var(--border-glass);
              border-radius: 12px;
              background: var(--bg-input);
              color: var(--text-main);
              font-family: inherit;
              box-sizing: border-box;
              transition: all 0.3s ease;
            "
          />
          <small
            style="
              display: block;
              margin-top: 4px;
              color: var(--text-muted);
              font-size: 0.8rem;
            "
            >๐ก ูุฑ ฺูุฏ ุฑูุฒ ฺฉุจุงุฑ ุขุจุงุฑ ฺฉูุฏ</small
          >
        </div>

        <!-- ุชุตูุฑ ฺฏุงู -->
        <div style="margin-bottom: 12px">
          <label
            style="
              display: block;
              margin-bottom: 6px;
              color: var(--text-secondary);
              font-size: 0.9rem;
              font-weight: 600;
            "
          >
            <i class="fas fa-image"></i> ุชุตูุฑ ฺฏุงู (ุงุฎุชุงุฑ):
          </label>
          <input
            type="file"
            id="modal-plant-image"
            accept="image/*"
            style="
              width: 100%;
              padding: 10px;
              border: 2px dashed var(--border-glass);
              border-radius: 12px;
              background: var(--bg-input);
              color: var(--text-main);
              box-sizing: border-box;
              cursor: pointer;
              font-size: 0.85rem;
            "
          />
        </div>

        <!-- ุฏฺฉููโูุง ุนูู -->
        <div style="display: flex; gap: 10px; margin-top: 15px">
          <button
            onclick="app.closeModal('add-modal')"
            style="
              flex: 1;
              padding: 12px;
              background: var(--bg-input);
              color: var(--text-main);
              border: 2px solid var(--border-glass);
              border-radius: 12px;
              font-weight: 600;
              cursor: pointer;
              transition: all 0.3s ease;
            "
            onmouseover="this.style.borderColor='var(--primary-green)'; this.style.color='var(--primary-green)';"
            onmouseout="this.style.borderColor='var(--border-glass)'; this.style.color='var(--text-main)';"
          >
            <i class="fas fa-times"></i> ูุบู
          </button>
          <button
            onclick="app.confirmAddToGarden()"
            style="
              flex: 1;
              padding: 12px;
              background: linear-gradient(
                135deg,
                var(--primary-green),
                var(--secondary-green)
              );
              color: white;
              border: none;
              border-radius: 12px;
              font-weight: 600;
              cursor: pointer;
              transition: all 0.3s ease;
              box-shadow: 0 4px 12px rgba(52, 199, 89, 0.3);
            "
            onmouseover="this.style.boxShadow='0 6px 16px rgba(52, 199, 89, 0.4)'; this.style.transform='translateY(-2px)';"
            onmouseout="this.style.boxShadow='0 4px 12px rgba(52, 199, 89, 0.3)'; this.style.transform='translateY(0)';"
          >
            <i class="fas fa-save"></i> ุฐุฎุฑู
          </button>
        </div>
      </div>
    </div>

    <!-- ููุฏุงู ุฏูุชุฑฺู ุฎุงุทุฑุงุช (Diary) -->
    <div id="diary-modal" class="modal">
      <div class="modal-content diary-content">
        <div
          class="diary-header"
          style="
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 12px;
            border-bottom: 1px solid var(--border-glass);
          "
        >
          <h3 id="diary-title" style="margin: 0; font-size: 1.05rem">
            ุชุงุฑุฎฺู ฺฏุงู
          </h3>
          <button
            onclick="app.closeModal('diary-modal')"
            class="close-btn"
            style="
              background: none;
              border: none;
              color: var(--text-secondary);
              font-size: 1.3rem;
              cursor: pointer;
            "
          >
            <i class="fas fa-times"></i>
          </button>
        </div>

        <div id="diary-list" class="diary-list">
          <!-- ูุณุช ูุงฺฏโูุง -->
        </div>

        <div
          class="diary-form"
          style="
            margin-top: 15px;
            padding-top: 12px;
            border-top: 1px solid var(--border-glass);
          "
        >
          <h4 style="margin: 0 0 12px 0; font-size: 0.95rem">
            <i class="fas fa-pen"></i> ุซุจุช ุฑูุฏุงุฏ ุฌุฏุฏ
          </h4>
          <div
            class="form-row"
            style="margin-bottom: 10px; display: flex; gap: 10px"
          >
            <select id="log-type" style="flex: 1">
              <option value="water">๐ง ุขุจุงุฑ</option>
              <option value="fertilizer">๐งช ฺฉูุฏุฏู</option>
              <option value="growth">๐ฑ ุฑุดุฏ/ุจุฑฺฏ ุฌุฏุฏ</option>
              <option value="soil">๐ ุชุนูุถ ุฎุงฺฉ</option>
              <option value="pest">๐ ุขูุช/ุจูุงุฑ</option>
              <option value="prune">โ๏ธ ูุฑุณ ฺฉุฑุฏู</option>
              <option value="other">๐ ุงุฏุฏุงุดุช ูุนููู</option>
            </select>

            <!-- โ ุฏุช ูพฺฉุฑ ุดูุณ ุฌุฏุฏ -->
            <div class="jalali-datepicker-wrapper" style="flex: 1">
              <button
                type="button"
                id="log-date-display"
                class="jalali-date-btn"
                onclick="app.openJalaliPicker()"
                style="
                  width: 100%;
                  padding: 10px;
                  background: var(--bg-input);
                  border: 2px solid var(--border-glass);
                  border-radius: 8px;
                  color: var(--text-main);
                  cursor: pointer;
                  font-weight: 600;
                  text-align: center;
                  transition: all 0.3s ease;
                "
              >
                ๐ ุงูุชุฎุงุจ ุชุงุฑุฎ
              </button>
              <input type="hidden" id="log-date" value="" />
            </div>
          </div>
          <textarea
            id="log-note"
            placeholder="ุชูุถุญุงุช..."
            style="
              margin-bottom: 10px;
              padding: 10px;
              border: 2px solid var(--border-glass);
              border-radius: 8px;
              background: var(--bg-input);
              color: var(--text-main);
              font-family: inherit;
            "
          ></textarea>

          <!-- โ ุฏฺฉูู ุซุจุช ุจูุชุฑ -->
          <button
            onclick="app.saveLog()"
            class="btn-confirm"
            style="
              width: 100%;
              padding: 12px;
              background: linear-gradient(
                135deg,
                var(--primary-green),
                var(--secondary-green)
              );
              color: white;
              border: none;
              border-radius: 12px;
              font-weight: 700;
              cursor: pointer;
              font-size: 0.95rem;
              display: flex;
              align-items: center;
              justify-content: center;
              gap: 8px;
              transition: all 0.3s ease;
              box-shadow: 0 4px 12px rgba(52, 199, 89, 0.3);
            "
            onmouseover="this.style.boxShadow='0 6px 16px rgba(52, 199, 89, 0.4)'; this.style.transform='translateY(-2px)';"
            onmouseout="this.style.boxShadow='0 4px 12px rgba(52, 199, 89, 0.3)'; this.style.transform='translateY(0)';"
          >
            <i class="fas fa-check"></i> ุซุจุช ุฑูุฏุงุฏ
          </button>
        </div>
      </div>
    </div>

    <!-- ููุฏุงู ูฺฉโูพุฏุง (Wikipedia) -->
    <div id="wiki-modal" class="modal" style="display: none">
      <div
        class="modal-content"
        style="max-width: 500px; max-height: 85vh; overflow-y: auto"
      >
        <div
          style="
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 12px;
            border-bottom: 1px solid var(--border-glass);
          "
        >
          <h3
            id="wiki-title-modal"
            style="margin: 0; color: var(--info-blue); font-size: 1.05rem"
          >
            <i class="fab fa-wikipedia-w"></i> ุฏุงูุดูุงูู ุขููุงู
          </h3>
          <button
            onclick="app.closeModal('wiki-modal')"
            class="close-btn"
            style="
              background: none;
              border: none;
              color: var(--text-secondary);
              font-size: 1.3rem;
              cursor: pointer;
            "
          >
            <i class="fas fa-times"></i>
          </button>
        </div>

        <div id="wiki-loading" style="text-align: center; padding: 20px">
          <i
            class="fas fa-spinner fa-spin"
            style="font-size: 2rem; color: var(--primary-green)"
          ></i>
          <p style="margin: 10px 0 0 0; font-size: 0.95rem">
            ุฏุฑ ุญุงู ุงุชุตุงู ุจู ูฺฉโูพุฏุง...
          </p>
        </div>

        <div id="wiki-result" style="display: none">
          <img
            id="wiki-image"
            src=""
            alt=""
            style="
              width: 100%;
              border-radius: 10px;
              margin-bottom: 12px;
              display: none;
            "
          />
          <p
            id="wiki-extract"
            style="
              line-height: 1.7;
              color: var(--text-main);
              text-align: justify;
              font-size: 0.95rem;
            "
          ></p>
          <a
            id="wiki-link"
            href="#"
            target="_blank"
            class="btn-confirm"
            style="
              display: block;
              text-align: center;
              text-decoration: none;
              margin-top: 12px;
              background: var(--info-blue);
            "
          >
            ูุทุงูุนู ููุงูู ฺฉุงูู
          </a>
        </div>

        <div
          id="wiki-error"
          style="
            display: none;
            text-align: center;
            color: var(--warning-red);
            padding: 20px;
          "
        >
          <i
            class="fas fa-wifi"
            style="font-size: 2rem; margin-bottom: 10px"
          ></i>
          <p>ุงุชุตุงู ุจุฑูุฑุงุฑ ูุดุฏ ุง ููุงููโุง ุงูุช ูุดุฏ.</p>
          <button
            onclick="app.closeModal('wiki-modal')"
            class="btn-cancel"
            style="margin-top: 10px"
          >
            ุจุณุชู
          </button>
        </div>
      </div>
    </div>

    <!-- ููุฏุงู ุฑุงูููุง ุจุงุฒ -->
    <div id="game-guide-modal" class="modal">
      <div class="modal-content">
        <div
          style="
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 12px;
            border-bottom: 1px solid var(--border-glass);
          "
        >
          <h3 style="margin: 0">๐ฎ ุฑุงูููุง ุจุงุฒ</h3>
          <button
            onclick="app.closeModal('game-guide-modal')"
            style="
              background: none;
              border: none;
              font-size: 1.3rem;
              cursor: pointer;
            "
          >
            <i class="fas fa-times"></i>
          </button>
        </div>
        <!-- โ ุงู element ุงูุฒุงู ุงุณุช -->
        <div id="game-guide-content"></div>
      </div>
    </div>

    <style>
      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateX(20px);
        }
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }

      @keyframes slideOut {
        from {
          opacity: 1;
          transform: translateX(0);
        }
        to {
          opacity: 0;
          transform: translateX(20px);
        }
      }

      @keyframes activateBtn {
        0% {
          transform: scale(0.95);
        }
        50% {
          transform: scale(1.05);
        }
        100% {
          transform: scale(1);
        }
      }
    </style>

    <script type="module" src="./js/main.js"></script>

    <!-- ุณุฑูุณ ูุฑฺฉุฑ Registration -->
    <script>
      if ("serviceWorker" in navigator) {
        window.addEventListener("load", () => {
          navigator.serviceWorker
            .register("./service-worker.js")
            .then((reg) => {
              console.log("โ Service Worker Registered:", reg);
              // ุจุฑุง์ุฏุชโูุง ุฌุฏุฏ
              reg.addEventListener("updatefound", () => {
                const newWorker = reg.installing;
                newWorker.addEventListener("statechange", () => {
                  if (
                    newWorker.state === "installed" &&
                    navigator.serviceWorker.controller
                  ) {
                    console.log("๐ New Service Worker available");
                  }
                });
              });
            })
            .catch((err) => {
              console.error("โ Service Worker Registration Failed:", err);
            });
        });
      }

      // ุจุณุชูโุจูุฏ ู ููุงุด ุฑุงูููุง
      window.showGameGuide = function () {
        const modal = document.getElementById("game-guide-modal");
        const content = document.getElementById("game-guide-content");

        // ุงฺฏุฑ GameComponent ููุฌูุฏ ุจุงุดุฏ
        if (typeof GameComponent !== "undefined" && GameComponent.guideScreen) {
          content.innerHTML = GameComponent.guideScreen();
        }

        if (modal) modal.style.display = "flex";
      };
    </script>
  </body>
</html>
